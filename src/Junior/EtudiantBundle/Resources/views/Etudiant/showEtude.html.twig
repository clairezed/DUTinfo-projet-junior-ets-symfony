{% extends "JuniorEtudiantBundle:Etudiant:layoutEtudiant.html.twig" %}

{% block title %}
{{ parent()}} - Etude
{% endblock %}

{% block content_etudiant %}


{% set total = etude.prixJournee * nbJours %}

<h2>Etude</h2>
<div class="well">
    <ul class="inline">
        <li>N° : <span class="label">{{ etude.id }}</span></li>
        <li>Titre : <span class="label">{{ etude.nomEtude }}</span></li>
        <li>Rôle : <span class="label">{{ statut }}</span></li>
    </ul>
    <ul class="inline">
        <li>Durée : <span class="label">{{ nbJours }} jours</span></li>
        <li>Prix par jour : <span class="label">{{ etude.prixJournee }} €</span></li>
        <li>Total : <span class="label">{{ total }} €</span></li>
        <li>Statut : <span class="label">{{ etude.statutEtude }}</span></li>
    </ul>
</div>

{# n'afficher les acomptes que s'il y a de acomptes à afficher#}
{% if acomptes.count > 0 %}
<div>
    <h2>Acomptes</h2>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Numero</th>
                <th>Date</th>
                <th>Montant</th>
                <th>Statut</th>
            </tr>
        </thead>
        <tbody>
            {% for acompte in acomptes %}
                <tr>
                    <td>{{ acompte.id }}</td>
                    <td>{{ acompte.dateAcompte|date("d/m/Y") }}</td>
                    <td>{{ acompte.montantAcompte }}</td>
                    <td>{{ acompte.statutAcompte }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
<p>Vous n'avez demandé aucun acompte pour cette étude.<p>
  {% endif %}

{% if etude.statutEtude == "En cours" %}
    <td>   
        <a href="{{ path('junior_etudiant_newAcompte', {'idEtude': etude.id}) }}" class="btn btn-info btn-small">
            <i class="icon-edit icon-white"></i>
            Demander un acompte
        </a>
    </td>
{% endif %}

{% endblock %} 